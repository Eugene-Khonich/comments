# üìù Comments SPA Application

## üìå –û–ø–∏—Å–∞–Ω–∏–µ

–û–¥–Ω–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (SPA) –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤, –≤–ª–æ–∂–µ–Ω–∏–π, CAPTCHA, –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏ –º–æ–º–µ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ WebSocket.

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

### Frontend

- **React 19 + Vite**
- Formik & Yup (–≤–∞–ª–∏–¥–∞—Ü–∏—è)
- Axios
- WebSocket (–∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ)

### Backend

- **Express.js**
- TypeORM (PostgreSQL)
- svg-captcha (CAPTCHA)
- Sharp (—Ä–µ—Å–∞–π–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π)
- Multer (–∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤)

### DevOps

- Docker / Docker Compose
- .env –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

## üéØ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ —Å –≤–ª–æ–∂–µ–Ω–Ω—ã–º–∏ –æ—Ç–≤–µ—Ç–∞–º–∏ (–Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è –≥–ª—É–±–∏–Ω–∞)
- ‚úÖ –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –∏–º–µ–Ω–∏, email, –¥–∞—Ç–µ (–ø–æ —É–±—ã–≤–∞–Ω–∏—é/–≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—é)
- ‚úÖ –ü–∞–≥–∏–Ω–∞—Ü–∏—è –ø–æ 25 –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
- ‚úÖ CAPTCHA —Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (–±—É–∫–≤—ã/—Ü–∏—Ñ—Ä—ã)
- ‚úÖ –†–∞–∑—Ä–µ—à—ë–Ω–Ω—ã–µ HTML-—Ç–µ–≥–∏: `<a>`, `<strong>`, `<i>`, `<code>`
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∑–∞–∫—Ä—ã—Ç–∏–µ —Ç–µ–≥–æ–≤
- ‚úÖ –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏
- ‚úÖ –ü—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤:

  - JPG/PNG/GIF (–º–∞–∫—Å. 320x240, auto resize)
  - TXT (–¥–æ 100–∫–±)

- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç XSS –∏ SQL-–∏–Ω—ä–µ–∫—Ü–∏–π
- ‚úÖ –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ WebSocket

## üîó –î–µ–º–æ (Render)

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É:
üëâ [https://comments-app-cv14.onrender.com](https://comments-app-cv14.onrender.com)

## üß± –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
comments/
‚îú‚îÄ‚îÄ client/        # React frontend (Vite)
‚îú‚îÄ‚îÄ server/        # Express backend
‚îú‚îÄ‚îÄ uploads/       # –ö–∞—Ç–∞–ª–æ–≥ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
‚îú‚îÄ‚îÄ temp/          # –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (—Ä–µ—Å–∞–π–∑ –∏ —Ç.–ø.)
‚îú‚îÄ‚îÄ Dockerfile     # Multistage build (–∫–ª–∏–µ–Ω—Ç + —Å–µ—Ä–≤–µ—Ä)
‚îú‚îÄ‚îÄ docker-compose.yaml
‚îî‚îÄ‚îÄ .env           # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ

```bash
# –ö–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/Eugene-Khonich/comments.git
cd comments

# –°–æ–∑–¥–∞—ë–º .env —Ñ–∞–π–ª
cat > .env <<EOF
PORT=3000

POSTGRES_DB=comments
POSTGRES_USER=postgres
POSTGRES_PASSWORD=secret_password

DB_HOST=db
DB_PORT=5432
DB_USER=postgres
DB_PASS=secret_password
DB_NAME=comments

DATABASE_URL=postgres://postgres:secret_password@db:5432/comments
VITE_API_BASE_URL=http://localhost:3000
EOF

# –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–æ–µ–∫—Ç
docker-compose up --build
```

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞:

- –°–µ—Ä–≤–µ—Ä –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ: [http://localhost:3000](http://localhost:3000)
- –ë–î –ø–æ–¥–Ω–∏–º–∞–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ Docker –Ω–∞ `db:5432`

## ‚öôÔ∏è –í–µ–±—Å–æ–∫–µ—Ç—ã

- –°–µ—Ä–≤–µ—Ä WebSocket —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —Ç–æ–º –∂–µ –ø–æ—Ä—Ç—É (3000) –∏ –Ω–∞ —Ç–æ–º –∂–µ endpoint-–µ
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è broadcast –Ω–æ–≤—ã—Ö –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –≤—Å–µ–º –ø–æ–¥–∫–ª—é—á—ë–Ω–Ω—ã–º –∫–ª–∏–µ–Ω—Ç–∞–º
- –ù–∞ –∫–ª–∏–µ–Ω—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å–æ–∑–¥–∞—ë—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —Å —É—á—ë—Ç–æ–º `VITE_API_BASE_URL`

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –°–µ—Ä–≤–µ—Ä–Ω–∞—è –∏ –∫–ª–∏–µ–Ω—Ç—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- –°–∞–Ω–∏—Ç–∞—Ü–∏—è HTML —Å —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω—ã–º–∏ —Ç–µ–≥–∞–º–∏
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤ (—Ç–∏–ø, —Ä–∞–∑–º–µ—Ä, MIME)
- PostgreSQL ‚Äî —á–µ—Ä–µ–∑ ORM TypeORM, –∑–∞—â–∏—Ç–∞ –æ—Ç SQL-–∏–Ω—ä–µ–∫—Ü–∏–π

## üìÅ –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

- –¢–∞–±–ª–∏—Ü–∞ `Comment`: id, parentId, userName, email, homePage, text, createdAt

## üí° –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –ø—Ä–∏ `docker-compose up --build`
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –º–æ–Ω–æ–ª–∏—Ç: —Ñ—Ä–æ–Ω—Ç —Å–±–æ—Ä–∫–∏ Vite –ø–æ–ø–∞–¥–∞–µ—Ç –≤ `server/src/dist`
- –î–ª—è —É—Å–ø–µ—à–Ω–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è `.env` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –ø—Ä–æ–ø–∏—Å–∞–Ω –≤ `env_file`

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ–∫-–ª–∏—Å—Ç–∞ (—Ç–µ—Å—Ç–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ)

| –ü—É–Ω–∫—Ç                                              | –°—Ç–∞—Ç—É—Å |
| -------------------------------------------------- | ------ |
| –í–ª–æ–∂–µ–Ω–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏                              | ‚úÖ     |
| –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –∏–º–µ–Ω–∏/email/–¥–∞—Ç–µ                     | ‚úÖ     |
| CAPTCHA                                            | ‚úÖ     |
| –†–∞–∑—Ä–µ—à—ë–Ω–Ω—ã–µ HTML-—Ç–µ–≥–∏ –∏ –∏—Ö –≤–∞–ª–∏–¥–∞—Ü–∏—è               | ‚úÖ     |
| –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Å–æ–æ–±—â–µ–Ω–∏–π –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏            | ‚úÖ     |
| –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ TXT-—Ñ–∞–π–ª–æ–≤                  | ‚úÖ     |
| –ó–∞—â–∏—Ç–∞ –æ—Ç XSS –∏ SQL-–∏–Ω—ä–µ–∫—Ü–∏–π                       | ‚úÖ     |
| –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ (WebSocket) | ‚úÖ     |
| –ü–∞–≥–∏–Ω–∞—Ü–∏—è (25 –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É)            | ‚úÖ     |
| Docker + README + —Å—Ö–µ–º–∞ –ë–î + git-–∏—Å—Ç–æ—Ä–∏—è           | ‚úÖ     |

---

**–ê–≤—Ç–æ—Ä**: [Eugene Khonich](https://github.com/Eugene-Khonich)
